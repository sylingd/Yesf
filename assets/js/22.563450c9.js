(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{207:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"综述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#综述","aria-hidden":"true"}},[s._v("#")]),s._v(" 综述")]),s._v(" "),t("p",[s._v("为了在不破坏框架整体流程的前提下，保证灵活度，框架有“插件”功能。插件可以在一些特殊事件时触发，根据用户需要进行一些修改。")]),s._v(" "),t("p",[s._v("在插件中可以使用协程，但请注意判断当前是否为Task进程。Task进程没有创建协程上下文，因此无法使用协程。")]),s._v(" "),t("h2",{attrs:{id:"插件总体规则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件总体规则","aria-hidden":"true"}},[s._v("#")]),s._v(" 插件总体规则")]),s._v(" "),t("h4",{attrs:{id:"先注册先调用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#先注册先调用","aria-hidden":"true"}},[s._v("#")]),s._v(" 先注册先调用")]),s._v(" "),t("p",[s._v("先注册的插件将会被先调用")]),s._v(" "),t("h4",{attrs:{id:"单一返回"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单一返回","aria-hidden":"true"}},[s._v("#")]),s._v(" 单一返回")]),s._v(" "),t("p",[s._v("一个事件可以注册多个插件。触发时，会循环调用每个插件，直到返回结果不为NULL。例如：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("class PluginTest  {\n  public static $isTrigger = 0;\n  public static function callback1($data) {\n    self::$isTrigger = 1;\n    return NULL;\n  }\n  public static function callback2($data) {\n    return '_t_' . $data;\n  }\n  public function testSeveralPlugin() {\n    Plugin::register('test', 'PluginTest::callback2');\n    Plugin::register('test', 'PluginTest::callback1');\n    echo Plugin::trigger('test', ['_test_data_']); //输出：_t__test_data_\n    echo self::$isTrigger; //输出：0\n  }\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])])])},[],!1,null,null,null);a.default=e.exports}}]);